"0","make_recipe <- function(ingredients, "
"0","                        name,"
"0","                        category) {"
"0","  if (!is.list(ingredients)) {stop('Ingredients are not in list format.')}"
"0","  "
"0","  combined_ingredients = NULL"
"0","  "
"0","  print(paste0('New item: ', name))"
"0","  for (ing in ingredients) {"
"0","    ing_name = names(ing)"
"0","    ing_quantity = ing[[1]]"
"0","    if (sum(ing_quantity) ==! 1) {stop('sum of quantity unequal 1')}"
"0","    print(paste0(ing_name, ': ', ing_quantity))"
"0","    "
"0",""
"0","    tmp <-"
"0","      get_ingredient(ing_name) %>%"
"0","      select(`EiweiÃŸ, Proteingehalt`:`Energie, Gesamt (kcal)`) %>% "
"0","      mutate_all(.funs = funs(. * ing_quantity))"
"0","    combined_ingredients = rbind(combined_ingredients, tmp)"
"0","  }"
"0",""
"0","  combined <- colSums(combined_ingredients, na.rm = T) %>% t(.) %>% "
"0","    as.data.frame(.) %>% "
"0","    mutate(item_prodi = name, "
"0","           item_descr = name, "
"0","           item_id = 'recipe', "
"0","           item_cat = category,"
"0","           item_subcat = NA) %>% "
"0","  "
"0","    select(item_prodi, item_descr, item_id, item_cat, item_subcat, everything())"
"0",""
"0","  return(combined)"
"0","}"
"0",""
