"0","set.seed(73)"
"0","keto.bls <- keto.bls[!(keto.bls$item_cat == 'Gew端rze, W端rzmittel, Hilfsstoffe' ),]##| keto.bls$item_cat =='Men端komponenten'"
"0",""
"0","tmp <- unique(subset(keto.bls,select = c(`item_cat`,`item_subcat`,`item_prodi`))) %>% distinct(.)"
"0","r <- tmp"
"0","colnames(r) <- c('item_cat.select','item_subcat.select','item_prodi.select') "
"0",""
"0",""
"0","r <- tidyr::uncount(r, dplyr::n())"
"0","# tmp <- tmp[rep(seq_len(nrow(tmp)), nrow(r)), ]"
"0","tmp <- purrr::map_dfr(seq_len(1250), ~tmp)##nrow(tmp)/nrow(r)=1044  ##w/o gew端rze 1280"
"0","tmp <- cbind(tmp,r)"
"0",""
"0","cat.dist <-"
"0","  tmp %>% "
"0","  mutate(same_subcat = item_subcat.select == item_subcat,"
"0","         same_cat = item_cat.select == item_cat) %>% "
"0","  mutate(total = (as.numeric(!same_cat) + as.numeric(!same_subcat)) / 2) %>% "
"0","  dplyr::select(item_prodi.select, item_prodi, total) %>%"
"0","  "
"0","  pivot_wider(names_from = 'item_prodi.select', values_from = 'total') %>% "
"0","  column_to_rownames('item_prodi') %>%"
"0","  as.dist(.)"
"0",""
"0","cat.dist[is.na(cat.dist)] <- 0"
"0",""
"0","#cats should all have own node"
"0","#respective sub_cats too"
